@echo off
chcp 65001 >nul
echo ===================================
echo  Запуск симулятора магазина
echo ===================================

:: Проверяем, существует ли уже виртуальное окружение
if not exist venv (
    echo Создание виртуального окружения...
    python -m venv venv
    if %errorlevel% neq 0 (
        echo Ошибка при создании виртуального окружения.
        echo Убедитесь, что Python установлен и доступен в PATH.
        pause
        exit /b 1
    )
    echo Виртуальное окружение создано успешно.
) else (
    echo Виртуальное окружение уже существует.
)

:: Активируем виртуальное окружение и устанавливаем зависимости
echo Активация виртуального окружения...
call venv\Scripts\activate.bat

:: Установка зависимостей
echo Установка зависимостей из requirements.txt...
pip install -r requirements.txt
if %errorlevel% neq 0 (
    echo Ошибка при установке зависимостей.
    pause
    exit /b 1
)

:: Запуск приложения
echo Запуск приложения...
python main.py

:: Деактивация виртуального окружения после завершения работы программы
call venv\Scripts\deactivate.bat

pause 